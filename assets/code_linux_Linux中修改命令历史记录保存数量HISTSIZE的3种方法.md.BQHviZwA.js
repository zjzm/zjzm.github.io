import{_ as a,c as t,o as i,ag as e}from"./chunks/framework.B-XtCDNB.js";const n="data:image/png;base64,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",r="/assets/6c10617e0baafc64b6be0eb017d3e64f.JQ5TZD2P.png",h="/assets/f87d99e763a917bba24cd8a16b0af4e0.ndD7xpHA.png",p="/assets/5d9d6dba20890618e8d968d099aac844.CqoRiZGG.png",l="/assets/11d98e33dd38549fc6a1b9192d4d2242.C_Vaa6b2.png",c="/assets/438398f53e47f1d984eaabafbc56feb2.c83s6rAS.png",m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"code/linux/Linux中修改命令历史记录保存数量HISTSIZE的3种方法.md","filePath":"code/linux/Linux中修改命令历史记录保存数量HISTSIZE的3种方法.md"}'),b={name:"code/linux/Linux中修改命令历史记录保存数量HISTSIZE的3种方法.md"};function o(d,s,g,E,S,I){return i(),t("div",null,[...s[0]||(s[0]=[e('<p>以Ubuntu16.04.3为例，默认只显示最近的1000条、保存最近的2000条命令记录。1000条之后如再产生新记录，最前面超过1000的那部分记录将会不显示。2000条之后如再产生新记录，最前面超过2000的那部分记录将会从.bash_history中删除。<br> 查询当前HISTSIZE值的命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HISTSIZE </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HISTFILESIZE</span></span></code></pre></div><p>示例见下图：<br><img src="'+n+'" alt="默认HISTSIZE和HISTFILESIZE"></p><p>如果需要修改，可使用如下3种方法：<br><strong>方法一：直接通过命令替换原有值进行修改</strong></p><p>命令如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/^HISTSIZE=原数量(默认1000)/HISTSIZE=目标数量/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#替换HISTSIZE值，控制输出历史记录数量 sed -i &#39;s/^HISTFILESIZE=原数量(默认1000)/HISTFILESIZE=目标数量/&#39; ~/.bashrc; #替换HISTFILESIZE值，控制存储历史记录数量 source ~/.bashrc; #使上述修改立即生效</span></span></code></pre></div><p>修改HISTSIZE过程的示例如下：<br><img src="'+r+'" alt="命令修改HISTSIZE过程"><br><strong>方法二：通过vi ~/.bashrc手动修改HISTSIZE和HISTFILESIZE的值</strong><br> 如，将其中的HISTSIZE修改为HISTSIZE=8000(如果不存在该设置，可以直接添加)。修改后保存(保存方式：末行模式输入x或wq。或者按ESC回到命令模式下，再直接按下Shift+z z组合键)。示例如下：<br><img src="'+h+'" alt="修改.bashrc过程"><br> 保存后，执行如下命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #使上述修改立即生效</span></span></code></pre></div><p><img src="'+p+'" alt="修改.bashrc效果"><br> 注：<br> 1、HISTSIZE值，用于控制history命令输出历史记录数量；HISTFILESIZE值，控制.bash_history文件中存储历史记录数量；<br> 2、如果想要history记录中显示日期、时间、操作者、机器IP等信息，可以在~/.bashrc或/etc/profile添加类似HISTTIMEFORMAT=&#39;[%F %T] : &#39;字段，放在HISTSIZE和HISTFILESIZE下面即可。</p><p><strong>方法三：通过vi /etc/profile手动修改HISTSIZE的值</strong><br> 如，可在/etc/profile最后一行增加：<br> HISTSIZE=46000<br> HISTFILESIZE=5000（下图中未添加该字段，实际使用时可根据需要添加）<br><img src="'+l+'" alt="手动修改profile中HISTSIZE值"><br> 修改后，保存(保存方式：末行模式输入x或wq。或者按ESC回到命令模式下，再直接按下Shift+z z组合键)。<br> 保存后，别忘了执行如下命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#使上述修改立即生效</span></span></code></pre></div><p><strong>注：如果同时修改了~/.bashrc和/etc/profile两个配置中文件的HISTSIZE值，并且两个值不一样的话，source哪个配置文件，哪个文件中的值才会生效。效果参考下图：</strong><br><img src="'+c+'" alt="source不同配置文件的效果"><br> 参考blog：<br> 1、HISTTIMEFORMAT包含日期、时间、操作者、机器IP等较丰富信息：<a href="https://blog.csdn.net/stormeryang/article/details/95174294" target="_blank" rel="noreferrer">点击这里</a>.<br> 2、HISTTIMEFORMAT包含日期、时间等较简洁信息： <a href="https://blog.csdn.net/SecondJanuary/article/details/8985010?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noreferrer">点击这里</a>.</p>',12)])])}const f=a(b,[["render",o]]);export{m as __pageData,f as default};
